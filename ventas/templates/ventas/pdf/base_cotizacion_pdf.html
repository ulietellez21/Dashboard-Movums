{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ cotizacion.titulo|default:"Cotización" }}</title>
    <style>
/* ============================================
   ESTILOS PARA PDFs DE COTIZACIONES
   DISEÑO MINIMALISTA MODERNO Y LLAMATIVO
   Generados con WeasyPrint
   ============================================ */
{% if membrete_url %}
    /* CONFIGURACIÓN CON MEMBRETE (FONDO COMPLETO) */
    @page {
        size: letter;
        /* Márgenes de seguridad: Arriba, Derecha, Abajo, Izquierda */
        /* Margen inferior aumentado a 3.0cm para recortar un renglón al final de cada página */
        margin: 3.5cm 2.0cm 3.0cm 2.0cm;
        /* NOTA: background-image se maneja en body::before para full-bleed */
    }
    
{% else %}
    /* CONFIGURACIÓN SIN MEMBRETE (DEFAULT) */
    @page {
        size: letter;
        margin: 1.5cm;
    }
{% endif %}

/* Variables de color Movums - Paleta del Brandboard */
:root {
    /* Colores principales del brandboard */
    --movums-navy: #1A2346;            /* Deep Navy Blue */
    --movums-violet: #5A429C;          /* Violet/Dark Purple */
    --movums-royal: #3B72F4;           /* Royal Blue */
    --movums-medium: #2C96EB;          /* Medium Blue */
    --movums-light: #4FC3F7;           /* Light Blue/Cyan */
    --movums-pale: #E3F2FD;            /* Very Light Blue */
    --movums-green: #8BC34A;           /* Lime Green/Accent */
    --movums-charcoal: #202124;        /* Dark Charcoal/Black */
    
    /* Colores funcionales */
    --movums-primary: var(--movums-navy);
    --movums-secondary: var(--movums-royal);
    --movums-blue-corp: var(--movums-navy);
    --movums-blue: var(--movums-navy);
    
    /* Texto y fondos */
    --text-primary: var(--movums-charcoal);
    --text-secondary: #4a5568;
    --text-muted: #718096;
    --border-light: #E5E7EB;
    --border-medium: #CBD5E0;
    --bg-section: #F9FAFB;
    --bg-white: #ffffff;
    --accent-blue: var(--movums-royal);
    --accent-light: var(--movums-pale);
    --success: var(--movums-green);
    
    /* Espaciado */
    --spacing-xs: 6px;
    --spacing-sm: 12px;
    --spacing-md: 20px;
    --spacing-lg: 32px;
    --spacing-xl: 48px;
}

/* Reset y base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Fondo Fijo Full-Bleed: El membrete cubre toda la hoja usando body::before */
{% if membrete_url %}
body::before {
    content: "";
    display: block;
    position: fixed;
    /* Coordenadas negativas iguales a los márgenes de @page para llegar al borde */
    /* Actualizado bottom a -3.0cm para coincidir con el nuevo margen inferior */
    top: -3.5cm;
    left: -2.0cm;
    right: -2.0cm;
    bottom: -3.0cm;
    z-index: -1000; /* Detrás de todo */
    
    /* Propiedades del fondo del membrete */
    background-image: url("{{ membrete_url }}");
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
}
{% endif %}

body {
    font-family: 'Pangea', 'Arial', 'Helvetica', 'Segoe UI', sans-serif;
    font-size: 9pt;
    color: var(--text-primary);
    line-height: 1.5;
    background: transparent;
    width: 100%;
    min-height: 100vh;
    box-sizing: border-box;
    
    /* Los márgenes se controlan desde @page, el body no tiene padding ni margin */
    padding: 0;
    margin: 0;
}

/* ============================================
   MEMBRETE COMO FONDO DE PÁGINA
   El membrete se aplica como background-image en @page
   ============================================ */

.header {
    display: none; /* Header oculto, el membrete es fondo */
}


/* ============================================
   CONTENEDOR PRINCIPAL
   ============================================ */
.cotizacion-container {
    width: 100%;
    margin: 0;
    padding: 0; /* Ya no necesitamos padding aquí, lo tiene el body */
    background: transparent;
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

/* Para cotizaciones genéricas, permitir flujo libre */
.cotizacion-generica .cotizacion-container {
    display: block !important; /* Cambiar a block para mejor flujo */
    gap: 0 !important;
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
}


.cotizacion-generica .content-wrapper {
    padding-top: 48px !important; /* Solo el spacer-top */
    padding-bottom: 0 !important;
    margin-bottom: 0 !important; /* Sin margen inferior adicional */
    page-break-inside: auto !important;
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
}

/* Spacer para separar el contenido del membrete */
.spacer-top {
    height: 48px; /* 2 saltos de línea adicionales (24px cada uno) */
    display: block;
}

/* Contenedor padre que agrupa contenido y términos en la misma página */
.content-page-wrapper {
    page-break-before: always; /* Forzar salto de página antes del wrapper */
    box-sizing: border-box;
}

/* Para cotizaciones genéricas, no forzar salto de página */
.cotizacion-generica .content-page-wrapper {
    page-break-before: auto !important; /* No forzar salto */
    break-before: auto !important;
    page-break-inside: auto !important;
    break-inside: auto !important;
    overflow: visible !important;
}

/* Wrapper para el contenido (vuelos, hoteles, etc.) con espacio superior */
.content-wrapper {
    padding-top: 168px; /* 7 saltos de línea (24px cada uno = 168px) */
    padding-bottom: 0;
    box-sizing: border-box;
}

/* Para cotizaciones genéricas, reducir padding superior y permitir flujo */
/* Aplicar cuando hay card-generica dentro */
.content-wrapper .card-generica {
    /* El card-generica ya tiene sus propias reglas */
}

/* Ajuste específico para cotizaciones de paquetes: menos espacio en la segunda página */
.cotizacion-paquete .content-wrapper {
    padding-top: 144px; /* 6 saltos de línea (quitar 1 salto = 24px menos) */
}

/* Wrapper para términos y condiciones - visible y posicionado correctamente */
.terminos-wrapper {
    width: 100%;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    display: block !important;
    position: relative;
    page-break-before: avoid; /* Mantener en la misma página que el contenido */
    page-break-inside: avoid;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Evitar que las cards y secciones se partan entre páginas */
.card {
    page-break-before: auto;
    page-break-inside: avoid; /* Evitar que la card se parta */
    page-break-after: avoid; /* Mantener la card junta con su total */
    margin-top: 0;
    margin-bottom: 8px; /* Espaciado reducido a la mitad entre cards (16px → 8px) */
}

/* Excepción: cards genéricas pueden partirse */
.card.card-generica {
    page-break-inside: auto !important;
    page-break-after: auto !important;
}


.info-section {
    page-break-before: auto;
    page-break-inside: avoid;
    margin-top: 0;
}

/* Agregar espacio superior cuando una card/info-section aparece después de un salto de página */
/* Usamos margin-top en lugar de ::before para mejor compatibilidad con WeasyPrint */
.info-section:first-of-type {
    margin-top: 0; /* El spacer-top ya proporciona el espacio en la primera página */
}

/* Cuando un elemento aparece al inicio de una nueva página (después de un salto), agregar espacio */
.card + .card,
.info-section + .info-section {
    margin-top: 0; /* El gap del contenedor maneja el espaciado normal */
}


/* ============================================
   CARDS - DISEÑO MODERNO Y LLAMATIVO
   ============================================ */
.card {
    background: white;
    border: none;
    border-radius: 8px; /* Bordes redondeados para look moderno */
    padding: 0;
    margin: 0 0 8px 0; /* Espaciado reducido a la mitad entre cards (16px → 8px) */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); /* Sombra sutil */
    page-break-inside: avoid; /* Evitar que la card se parta */
    page-break-before: auto;
    page-break-after: avoid; /* Mantener card y total juntos */
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow: hidden; /* Asegurar que el contenido respete el border-radius */
}

/* Excepción VITAL para cotizaciones genéricas con texto largo */
/* SOBRESCRIBIR COMPLETAMENTE todas las reglas de .card para permitir flujo entre páginas */
.card.card-generica {
    display: block !important;
    background: white !important;
    border: none !important;
    border-radius: 0 !important; /* Sin bordes redondeados para evitar problemas de overflow */
    padding: 0 !important;
    margin: 0 !important; /* Sin márgenes que interfieran */
    box-shadow: none !important; /* Sin sombra */
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    overflow: visible !important; /* CRÍTICO: Permitir que el contenido fluya */
    page-break-inside: auto !important; /* CRÍTICO: Permitir que se parta entre páginas */
    page-break-before: auto !important;
    page-break-after: auto !important;
}

.card.card-generica .card-header {
    page-break-after: avoid !important; /* Mantener header con el contenido */
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

.card.card-generica .contenido-generica {
    page-break-inside: auto !important; /* Permitir saltos dentro del contenedor */
    display: block !important; /* Asegurar flujo normal de bloque */
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
}

.card.card-generica .contenido-generica-texto {
    page-break-inside: auto !important; /* Permitir saltos dentro del texto */
    page-break-before: auto !important;
    page-break-after: auto !important;
    display: block !important; /* Asegurar flujo normal de bloque */
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
}

/* DISEÑO VERTICAL SIMPLE Y ROBUSTO PARA TEXTO LARGO */
.contenido-generica {
    display: block !important;
    width: 100% !important;
    padding: 20px !important;
    margin: 0 !important; /* Sin márgenes */
    box-sizing: border-box !important;
    page-break-inside: auto !important; /* Permitir que se parta entre páginas */
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
}

.contenido-generica-label {
    display: block !important; /* Título en su propia línea */
    width: 100%;
    margin-bottom: 10px;
    font-size: 10pt;
    color: #2d3748;
    font-weight: bold;
    page-break-after: avoid !important; /* Mantener el título con el texto */
}

.contenido-generica-texto {
    display: block !important; /* Texto debajo, ocupando todo el ancho */
    width: 100% !important;
    font-size: 9pt;
    line-height: 1.6;
    color: #4a5568;
    text-align: justify; /* Justificado para mejor lectura */
    margin: 0 !important; /* Sin márgenes */
    padding: 0 !important; /* Sin padding */
    
    /* PROPIEDADES CRÍTICAS PARA PAGINACIÓN Y FLUJO ENTRE PÁGINAS */
    /* Usar ambas sintaxis (antigua y moderna) para máxima compatibilidad */
    page-break-inside: auto !important;
    break-inside: auto !important; /* Sintaxis moderna CSS3 */
    page-break-before: auto !important;
    break-before: auto !important;
    page-break-after: auto !important;
    break-after: auto !important;
    overflow: visible !important;
    white-space: normal !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    height: auto !important;
    max-height: none !important;
    min-height: 0 !important;
    
    /* Propiedades para controlar el flujo de texto entre páginas */
    orphans: 1 !important; /* Mínimo 1 línea (muy permisivo para mejor flujo) */
    widows: 1 !important; /* Mínimo 1 línea (muy permisivo para mejor flujo) */
}

/* Asegurar que los párrafos dentro del texto también puedan partirse */
.contenido-generica-texto p {
    page-break-inside: auto !important;
    break-inside: auto !important;
    margin: 0 0 8px 0 !important; /* Espaciado mínimo entre párrafos */
    padding: 0 !important;
    overflow: visible !important;
}

.contenido-generica-texto p:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

/* Mantener header y total juntos con la tabla */
.card-header {
    page-break-after: avoid; /* Header no se separa de la tabla */
}

/* Nota: La definición completa de .data-table está más abajo con todos los estilos compactos */

/* Mantener el total junto con la tabla */
.total-destacado {
    page-break-before: avoid; /* Total no se separa de la tabla */
}

/* Espaciado reducido entre header y tabla */
.card-header + .data-table,
.card-header + .info-table {
    margin-top: 8px !important; /* Espaciado más compacto */
}

.total-destacado {
    page-break-before: avoid;
}

.card-header {
    background: #004a8e; /* Azul oscuro según imagen */
    color: white;
    font-size: 14pt; /* Tamaño aumentado según imagen */
    font-weight: 700; /* Bold según imagen */
    margin: 0;
    padding: 10px 18px; /* Padding reducido para más compacto */
    display: flex;
    align-items: center;
    gap: 12px;
    letter-spacing: 1px; /* Letter-spacing ajustado */
    text-transform: uppercase;
    box-sizing: border-box;
    border-bottom: none;
    position: relative;
    flex-direction: row;
    min-height: 44px; /* Altura mínima reducida */
    overflow: visible;
    border-radius: 6px 6px 0 0; /* Esquinas redondeadas solo arriba */
}

.card-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
}

/* Asegurar que el icono esté siempre a la izquierda */
.card-header > * {
    order: 0; /* Resetear orden por defecto */
}

.card-header .icon {
    order: -1 !important; /* Forzar que el icono esté PRIMERO (a la izquierda) */
    width: 28px; /* Aumentado ligeramente más */
    height: 28px; /* Aumentado ligeramente más */
    display: inline-flex;
    align-items: center; /* Centrar verticalmente el icono */
    justify-content: center;
    background: transparent;
    border-radius: 0;
    padding: 0;
    flex-shrink: 0;
    margin-right: 0;
    vertical-align: middle; /* Asegurar alineación vertical */
}

.card-header .icon svg {
    width: 26px; /* Aumentado ligeramente más */
    height: 26px; /* Aumentado ligeramente más */
    fill: white !important;
    stroke: white !important;
    color: white !important;
    opacity: 1;
    display: block;
    vertical-align: middle; /* Asegurar alineación vertical */
}

/* ============================================
   TABLA DE INFORMACIÓN - ELEGANTE
   ============================================ */
.info-section {
    margin-bottom: 0;
    width: 100%;
    box-sizing: border-box;
    background: transparent;
    padding: 0;
}

.info-section-layout {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    margin-top: 0; /* Sin margen superior adicional */
    page-break-inside: avoid; /* Evitar que el layout se parta */
    justify-content: flex-start;
    max-width: 100%;
    width: 100%;
}

.info-section-main {
    flex: 2;
    min-width: 0;
    max-width: 58%;
}

.info-section-sidebar {
    flex: 1;
    min-width: 300px;
    max-width: 340px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-left: -180px; /* Aumentado aún más el desplazamiento hacia la izquierda para alinearlas con la línea negra */
    align-items: stretch;
}

.info-card-client {
    background: white !important;
    border-radius: 8px; /* Bordes redondeados para look moderno */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); /* Sombra sutil */
    padding: 0 !important;
    overflow: hidden; /* Asegurar que el contenido respete el border-radius */
    border: none; /* Sin bordes externos */
}

.info-card-client .info-table {
    padding: 0; /* Sin padding, el padding viene de las celdas */
    margin: 0;
    border: none; /* Sin bordes externos */
}

/* Tarjetas laterales con colores (con bordes redondeados) */
.sidebar-card {
    background: #3B72F4; /* Azul medio según imagen */
    border-radius: 6px; /* Bordes ligeramente redondeados */
    padding: 18px 22px 24px 22px; /* Padding aumentado, especialmente en la parte inferior para evitar cortes */
    box-shadow: 0 2px 6px rgba(59, 114, 244, 0.2);
    color: white;
    page-break-inside: avoid;
    page-break-before: auto;
    border: none;
    overflow: visible; /* Asegurar que el texto no se corte */
    box-sizing: border-box;
}

.sidebar-card.purple {
    background: #5A429C; /* Púrpura oscuro según imagen */
    box-shadow: 0 2px 6px rgba(90, 66, 156, 0.2);
}

.sidebar-card.blue {
    background: #4FC3F7; /* Azul claro/cyan según imagen */
    box-shadow: 0 2px 6px rgba(79, 195, 247, 0.2);
}

.sidebar-card-title {
    font-size: 12pt; /* Tamaño ajustado según imagen */
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    margin-bottom: 16px; /* Espaciado ajustado */
    padding-bottom: 0;
    border-bottom: none;
    color: white;
    line-height: 1.4; /* Aumentado para mejor espacio vertical */
}

.sidebar-card-content {
    font-size: 9pt; /* Tamaño base para contenido */
    line-height: 1.7; /* Aumentado para mejor espacio y evitar cortes */
}

.sidebar-card-item {
    margin-bottom: 14px; /* Espaciado ajustado según imagen */
    padding-bottom: 0;
    border-bottom: none; /* Sin borde según imagen */
}

.sidebar-card-item:last-child {
    margin-bottom: 0;
    padding-bottom: 4px; /* Espacio adicional después del último item para evitar que se pegue al borde */
}

.sidebar-card-label {
    font-size: 8pt; /* Labels más pequeños según imagen */
    opacity: 0.95; /* Ligeramente transparente */
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px; /* Espaciado entre label y valor */
    font-weight: 500;
    color: rgba(255, 255, 255, 0.95);
}

.sidebar-card-value {
    font-size: 10.5pt; /* Valores más grandes según imagen */
    font-weight: 700; /* Bold según imagen */
    opacity: 1;
    color: white;
    line-height: 1.5; /* Aumentado para evitar cortes de texto */
    word-wrap: break-word; /* Permitir saltos de línea si es necesario */
}

.info-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 0;
    background: white;
    box-sizing: border-box;
    padding: 0;
    display: table;
    border: none; /* Sin bordes externos */
    page-break-inside: avoid; /* Evitar que la tabla se parta entre páginas */
}

.info-table tr {
    background: transparent;
    border-bottom: 1px solid #e2e8f0; /* Borde más sutil según imagen */
    page-break-inside: avoid;
    page-break-after: avoid;
}

.info-table tr:last-child {
    border-bottom: none;
}

.info-table td {
    padding: 10px 8px; /* Padding ajustado según imagen */
    border: none;
    vertical-align: middle;
    font-size: 9.5pt; /* Tamaño de fuente ajustado */
    line-height: 1.5;
    page-break-inside: avoid;
}

.info-table td:first-child {
    font-weight: 600; /* Labels en bold */
    color: #1e3a5f; /* Azul oscuro legible para labels */
    width: 35%;
    font-size: 9.5pt;
    text-transform: none;
    letter-spacing: 0.2px;
    background: transparent;
    padding-right: 12px;
}

.info-table td:last-child {
    color: #2c5282; /* Azul medio legible para valores */
    font-size: 9.5pt;
    font-weight: 400; /* Regular para valores */
    background: transparent;
}

/* Alternar colores de fondo para mejor legibilidad */
/* Alternar colores de fondo para mejor legibilidad */
.info-table tr:nth-child(even) {
    background: #f8f9fa; /* Gris muy claro para filas pares */
}

.info-table tr:nth-child(even) td {
    background: transparent;
}

/* Bordes redondeados simulados para tablas usando border-radius */
.info-table {
    border-radius: 8px; /* Esquinas redondeadas */
    overflow: hidden; /* Asegurar que el contenido respete el border-radius */
}

.data-table {
    border-radius: 8px; /* Esquinas redondeadas */
    overflow: hidden; /* Asegurar que el contenido respete el border-radius */
}

.sidebar-card {
    border-radius: 8px; /* Esquinas redondeadas para sidebars */
}

.card {
    border-radius: 8px; /* Esquinas redondeadas para cards */
}

.info-card-client {
    border-radius: 8px; /* Esquinas redondeadas para la tarjeta del cliente */
}

/* ============================================
   SUBTÍTULOS - MODERNOS
   ============================================ */
.subtitulo-vineta {
    color: var(--movums-blue-corp);
    font-size: 14pt;
    font-weight: 700;
    margin: 20px 0 15px 0;
    display: flex;
    align-items: center;
    gap: 10px;
    letter-spacing: -0.3px;
    text-transform: uppercase;
    box-sizing: border-box;
    line-height: 1.6;
}

.subtitulo-vineta::before {
    content: "▸";
    color: var(--movums-blue-corp);
    font-size: 18pt;
    font-weight: bold;
    margin-right: 6px;
}

/* ============================================
   INFORMACIÓN INLINE - DISEÑO PULIDO
   ============================================ */
.info-inline {
    margin: 16px 0;
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    padding: 12px 0;
    box-sizing: border-box;
    width: 100%;
}

.info-item {
    display: inline-flex;
    align-items: baseline;
    gap: 10px;
    flex: 1;
    min-width: 220px;
}

.info-label {
    font-weight: 700;
    color: var(--text-secondary);
    font-size: 9pt;
    text-transform: uppercase;
    letter-spacing: 1.2px;
}

.info-value {
    color: var(--text-primary);
    font-size: 10.5pt;
    font-weight: 600;
}

.info-separator {
    color: var(--border-medium);
    margin: 0 10px;
    font-weight: 300;
}

/* ============================================
   LÍNEAS DE INFORMACIÓN
   ============================================ */
.info-line {
    margin: 14px 0;
    padding: 8px 0;
    line-height: 1.8;
    box-sizing: border-box;
    width: 100%;
}

.info-line-label {
    font-weight: 700;
    color: var(--text-secondary);
    font-size: 9pt;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-right: 12px;
}

.info-line-value {
    color: var(--text-primary);
    font-size: 10.5pt;
    font-weight: 500;
}

/* ============================================
   TOTAL DESTACADO - MUY LLAMATIVO
   ============================================ */
.total-destacado {
    margin: 0;
    padding: 6px 12px; /* Padding reducido para más compacto */
    background: var(--movums-royal);
    text-align: right;
    box-shadow: none;
    box-sizing: border-box;
    width: 100%;
    border-radius: 0 0 8px 8px; /* Esquinas redondeadas solo abajo */
}

/* Total del paquete con color morado y más espaciado */
.total-paquete-card {
    margin-top: 0.25cm !important; /* Espaciado reducido (quitados 2 saltos de línea = 48px) */
}

.total-paquete {
    background: #5A429C !important; /* Color morado/púrpura para destacar */
}

.total-paquete-text {
    font-size: 15pt !important; /* Tamaño de letra ligeramente más grande (13pt → 15pt) */
}

.total-text {
    font-size: 13pt; /* Tamaño ajustado según imagen */
    font-weight: 700;
    color: white;
    letter-spacing: 0.3px;
    margin: 0;
    text-shadow: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.total-text::before {
    content: 'Total:';
    font-size: 11pt; /* Tamaño ajustado */
    font-weight: 600;
    opacity: 0.95;
}

/* ============================================
   TABLAS DE DATOS - FORMATO TIPO TARJETA CON COLOR
   ============================================ */
.data-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 8px 0 0 0 !important; /* Espaciado más reducido - importante para paquetes */
    background: white;
    box-sizing: border-box;
    padding: 6px 12px !important; /* Padding interno aún más reducido para más compacto */
    display: table; /* Asegurar que se comporte como tabla */
    border-radius: 8px; /* Esquinas redondeadas */
    overflow: hidden; /* Asegurar que el contenido respete el border-radius */
    page-break-inside: avoid; /* Evitar que la tabla se parta entre páginas */
}

.data-table tr {
    background: transparent;
    border-bottom: 1px solid #e2e8f0; /* Borde más sutil según imagen */
    page-break-inside: avoid;
    page-break-after: avoid;
}

.data-table tr:last-child {
    border-bottom: none;
}

.data-table th {
    background: transparent;
    color: var(--movums-navy);
    padding: 12px 0;
    text-align: left;
    font-weight: 600;
    font-size: 9pt;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    border: none;
}

.data-table td {
    padding: 5px 0 !important; /* Padding vertical aún más reducido para paquetes */
    border: none;
    font-size: 9pt; /* Tamaño de fuente ligeramente reducido */
    vertical-align: middle;
    line-height: 1.3 !important; /* Line-height más compacto para paquetes */
    page-break-inside: avoid;
    word-wrap: break-word; /* Permitir que el texto largo se ajuste */
    overflow-wrap: break-word; /* Asegurar que el texto largo se ajuste */
    white-space: normal; /* Permitir saltos de línea */
}

.data-table td:first-child {
    font-weight: 600; /* Labels en bold */
    color: #2d3748; /* Dark gray para labels */
    width: 30% !important; /* Ancho reducido para más compacto (sobrescribe inline styles) */
    font-size: 9pt; /* Tamaño reducido */
    text-transform: none;
    letter-spacing: 0.2px;
    background: transparent;
    padding-right: 10px !important; /* Padding reducido */
}

.data-table td:last-child {
    color: #4a5568; /* Gray más claro para valores */
    font-size: 9pt; /* Tamaño reducido */
    font-weight: 400; /* Regular para valores */
    background: transparent;
}

/* Estilo tipo "pill" para valores monetarios cuando están en la última columna */
.data-table td:last-child strong,
.data-table td:last-child .amount-pill {
    display: inline-block;
    background: var(--movums-pale);
    color: var(--movums-navy);
    padding: 6px 16px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 10pt;
}

.data-table tr:nth-child(even) {
    background: rgba(227, 242, 253, 0.3);
}

.data-table tr:nth-child(even) td:first-child {
    background: transparent;
}

/* ============================================
   SEPARADORES Y ESPACIOS
   ============================================ */
.separator {
    height: 2px;
    background: linear-gradient(to right, transparent, var(--border-medium), transparent);
    margin: 36px 0;
}

.spacer {
    height: 28px;
}

/* ============================================
   LISTAS
   ============================================ */
.list-item {
    margin: 12px 0;
    padding-left: 28px;
    line-height: 2;
    position: relative;
}

.list-item::before {
    content: "→";
    color: var(--movums-blue-corp);
    position: absolute;
    left: 0;
    font-weight: bold;
    font-size: 14pt;
}

/* ============================================
   NOTAS Y TÉRMINOS
   ============================================ */
.notas-section {
    margin-top: 40px;
    padding: 28px;
    background: #F9FAFB;
    border-radius: 8px;
    font-size: 9.5pt;
    color: var(--text-secondary);
    border-left: 4px solid #E5E7EB;
    line-height: 1.6;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
}

.notas-section .subtitulo-vineta {
    font-size: 13pt;
    margin-bottom: 14px;
    color: var(--text-primary);
}

/* ============================================
   FOOTER - MINIMALISTA
   ============================================ */
.footer {
    margin-top: 24px;
    padding-top: 16px;
    padding-bottom: 8px;
    text-align: center;
    color: var(--text-muted);
    font-size: 7pt;
    line-height: 1.5;
}

.footer-text {
    margin: 0;
    font-size: 7pt;
    color: #718096;
    line-height: 1.4;
}

/* Ocultar footer en cotizaciones de paquetes (solo se muestra en primera página si es necesario) */
.cotizacion-paquete .footer {
    display: none;
}

/* ============================================
   TÉRMINOS Y CONDICIONES - DISCRETO
   ============================================ */
.terminos-condiciones {
    margin-top: 264px;
    margin-bottom: 8px;
    margin-left: 0;
    margin-right: 0;
    padding: 12px 0;
    background: transparent;
    border-top: 1px solid #e2e8f0;
    border-bottom: 1px solid #e2e8f0;
    color: var(--text-secondary);
    font-size: 7.5pt;
    line-height: 1.0;
    text-align: left;
    page-break-inside: avoid;
    page-break-before: avoid;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    display: block !important;
    position: relative;
    visibility: visible !important;
    opacity: 1 !important;
    clear: both;
    z-index: 1;
}

.terminos-condiciones-title {
    font-size: 8.5pt;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.terminos-condiciones-content {
    font-size: 7.5pt;
    color: #718096;
    line-height: 1.0;
}

.terminos-condiciones-content p {
    margin: 2px 0;
    padding: 0;
    display: block;
    line-height: 1.0;
}

.terminos-condiciones-content p:last-child {
    margin-bottom: 0;
}

.terminos-condiciones-content em {
    font-style: italic;
    color: #718096;
}

/* ============================================
   UTILIDADES
   ============================================ */
.text-center {
    text-align: center;
}

.text-right {
    text-align: right;
}

.text-bold {
    font-weight: 700;
}

.text-muted {
    color: var(--text-muted);
}

.mt-1 { margin-top: var(--spacing-xs); }
.mt-2 { margin-top: var(--spacing-sm); }
.mt-3 { margin-top: var(--spacing-md); }
.mt-4 { margin-top: var(--spacing-lg); }

.mb-1 { margin-bottom: var(--spacing-xs); }
.mb-2 { margin-bottom: var(--spacing-sm); }
.mb-3 { margin-bottom: var(--spacing-md); }
.mb-4 { margin-bottom: var(--spacing-lg); }

/* ============================================
   EVITAR SALTOS DE PÁGINA - REGLAS MEJORADAS
   ============================================ */
/* Mantener cards completas sin partirse (excepto genéricas) */
.card:not(.card-generica) {
    page-break-inside: avoid;
    page-break-after: avoid;
}

/* Mantener secciones de información juntas */
.info-section {
    page-break-inside: avoid;
    page-break-after: auto; /* Permitir salto natural, el wrapper lo controla */
}


/* Mantener totales con sus tablas */
.total-destacado {
    page-break-inside: avoid;
    page-break-before: avoid; /* No separar del contenido anterior */
}

/* Evitar que las tablas se partan */
table.data-table,
table.info-table {
    page-break-inside: avoid;
}

/* Mantener filas de tabla juntas */
table.data-table tr,
table.info-table tr {
    page-break-inside: avoid;
    page-break-after: avoid;
}

/* Mantener celdas de tabla juntas */
table.data-table td,
table.data-table th,
table.info-table td,
table.info-table th {
    page-break-inside: avoid;
}

/* ============================================
   MEJORAS TIPOGRÁFICAS
   ============================================ */
h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    letter-spacing: -0.5px;
    line-height: 1.2;
    color: var(--text-primary);
}

p {
    margin: 14px 0;
    color: var(--text-primary);
}

/* Espaciado mejorado entre secciones */
.card + .card {
    margin-top: 0; /* El gap del contenedor maneja el espaciado (ya reducido a 6px) */
}

/* Mejora visual para elementos destacados */
strong {
    font-weight: 700;
    color: var(--text-primary);
}
    </style>
</head>
<body{% if tipo == 'paquete' %} class="cotizacion-paquete"{% elif tipo == 'generica' %} class="cotizacion-generica"{% endif %}>
    {% include "ventas/pdf/components/header.html" %}
    
    <div class="cotizacion-container">
        <!-- Spacer para separar el contenido del membrete (2 saltos de línea) -->
        <div class="spacer-top"></div>
        
        {% include "ventas/pdf/components/info_cliente.html" %}
        
        <!-- Términos y condiciones - en la primera página, antes del content-wrapper -->
        <div class="terminos-wrapper">
            {% block terminos_condiciones %}{% endblock %}
        </div>
        
        <!-- Contenedor que agrupa contenido en la segunda página -->
        <div class="content-page-wrapper">
            <!-- Wrapper para las cards de vuelo/hoteles con espacio superior -->
            <div class="content-wrapper">
                {% block content %}{% endblock %}
            </div>
        </div>
        
        {% if tipo != 'paquete' %}
            {% include "ventas/pdf/components/footer.html" %}
        {% endif %}
    </div>
</body>
</html>
